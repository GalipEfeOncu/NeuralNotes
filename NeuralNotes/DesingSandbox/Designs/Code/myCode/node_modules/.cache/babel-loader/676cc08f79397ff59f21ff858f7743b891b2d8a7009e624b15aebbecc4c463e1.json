{"ast":null,"code":"var _jsxFileName = \"D:\\\\projects\\\\neuralnotes\\\\src\\\\components\\\\DrawingCanvas.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect, useCallback } from 'react';\nimport { useTheme } from '../contexts/ThemeContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DrawingCanvas = ({\n  width = '100%',\n  height = '100%',\n  onSave\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  const {\n    darkMode\n  } = useTheme();\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [tool, setTool] = useState('pen'); // pen, eraser, highlighter\n  const [color, setColor] = useState('#ffffff');\n  const [lineWidth, setLineWidth] = useState(2);\n  const [history, setHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n\n  // Save canvas state to history\n  const saveCanvasState = useCallback(() => {\n    if (!canvasRef.current) return;\n    const canvas = canvasRef.current;\n    const state = canvas.toDataURL();\n\n    // If we're in the middle of the history, remove everything after current index\n    if (historyIndex < history.length - 1) {\n      setHistory(history.slice(0, historyIndex + 1));\n    }\n    setHistory(prevHistory => [...prevHistory, state]);\n    setHistoryIndex(prevIndex => prevIndex + 1);\n  }, [history, historyIndex]);\n\n  // Initialize canvas\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n\n    // Set canvas size\n    canvas.width = canvas.offsetWidth;\n    canvas.height = canvas.offsetHeight;\n\n    // Set background color\n    ctx.fillStyle = darkMode ? '#1a1a1a' : '#f5f5f5';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    // Save initial state\n    saveCanvasState();\n  }, [darkMode, saveCanvasState]);\n\n  // Handle window resize\n  useEffect(() => {\n    const handleResize = () => {\n      const canvas = canvasRef.current;\n      const tempCanvas = document.createElement('canvas');\n      const tempCtx = tempCanvas.getContext('2d');\n\n      // Copy current canvas to temp canvas\n      tempCanvas.width = canvas.width;\n      tempCanvas.height = canvas.height;\n      tempCtx.drawImage(canvas, 0, 0);\n\n      // Resize main canvas\n      canvas.width = canvas.offsetWidth;\n      canvas.height = canvas.offsetHeight;\n\n      // Restore background\n      const ctx = canvas.getContext('2d');\n      ctx.fillStyle = darkMode ? '#1a1a1a' : '#f5f5f5';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n      // Restore drawing\n      ctx.drawImage(tempCanvas, 0, 0);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [darkMode]);\n\n  // Undo\n  const undo = () => {\n    if (historyIndex > 0) {\n      const newIndex = historyIndex - 1;\n      setHistoryIndex(newIndex);\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext('2d');\n      const img = new Image();\n      img.src = history[newIndex];\n      img.onload = () => {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.drawImage(img, 0, 0);\n      };\n    }\n  };\n\n  // Redo\n  const redo = () => {\n    if (historyIndex < history.length - 1) {\n      const newIndex = historyIndex + 1;\n      setHistoryIndex(newIndex);\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext('2d');\n      const img = new Image();\n      img.src = history[newIndex];\n      img.onload = () => {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.drawImage(img, 0, 0);\n      };\n    }\n  };\n\n  // Clear canvas\n  const clearCanvas = () => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    ctx.fillStyle = darkMode ? '#1a1a1a' : '#f5f5f5';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    saveCanvasState();\n  };\n\n  // Start drawing\n  const startDrawing = e => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const rect = canvas.getBoundingClientRect();\n\n    // Get mouse position relative to canvas\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    ctx.beginPath();\n    ctx.moveTo(x, y);\n\n    // Set drawing style based on selected tool\n    if (tool === 'pen') {\n      ctx.strokeStyle = color;\n      ctx.lineWidth = lineWidth;\n      ctx.lineCap = 'round';\n      ctx.lineJoin = 'round';\n    } else if (tool === 'eraser') {\n      ctx.strokeStyle = darkMode ? '#1a1a1a' : '#f5f5f5';\n      ctx.lineWidth = lineWidth * 2;\n      ctx.lineCap = 'round';\n      ctx.lineJoin = 'round';\n    } else if (tool === 'highlighter') {\n      ctx.strokeStyle = `${color}80`; // Add transparency\n      ctx.lineWidth = lineWidth * 3;\n      ctx.lineCap = 'square';\n      ctx.lineJoin = 'bevel';\n    }\n    setIsDrawing(true);\n  };\n\n  // Draw\n  const draw = e => {\n    if (!isDrawing) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const rect = canvas.getBoundingClientRect();\n\n    // Get mouse position relative to canvas\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    ctx.lineTo(x, y);\n    ctx.stroke();\n  };\n\n  // Stop drawing\n  const stopDrawing = () => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    ctx.closePath();\n    setIsDrawing(false);\n\n    // Save canvas state to history\n    saveCanvasState();\n  };\n\n  // Handle touch events for mobile\n  const handleTouchStart = e => {\n    e.preventDefault();\n    const touch = e.touches[0];\n    const mouseEvent = new MouseEvent('mousedown', {\n      clientX: touch.clientX,\n      clientY: touch.clientY\n    });\n    startDrawing(mouseEvent);\n  };\n  const handleTouchMove = e => {\n    e.preventDefault();\n    const touch = e.touches[0];\n    const mouseEvent = new MouseEvent('mousemove', {\n      clientX: touch.clientX,\n      clientY: touch.clientY\n    });\n    draw(mouseEvent);\n  };\n  const handleTouchEnd = e => {\n    e.preventDefault();\n    stopDrawing();\n  };\n\n  // Save canvas as image\n  const saveCanvas = () => {\n    const canvas = canvasRef.current;\n    const dataUrl = canvas.toDataURL('image/png');\n    if (onSave) {\n      onSave(dataUrl);\n    } else {\n      // Default save behavior - download the image\n      const link = document.createElement('a');\n      link.download = `neuralnotes-canvas-${new Date().toISOString().slice(0, 10)}.png`;\n      link.href = dataUrl;\n      link.click();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center p-2 bg-gray-800 rounded-t-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setTool('pen'),\n          className: `p-2 rounded-md ${tool === 'pen' ? 'bg-gray-700' : 'hover:bg-gray-700'}`,\n          title: \"Pen\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-5 w-5\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M12 19l7-7 3 3-7 7-3-3z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M2 2l7.586 7.586\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n              cx: \"11\",\n              cy: \"11\",\n              r: \"2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setTool('eraser'),\n          className: `p-2 rounded-md ${tool === 'eraser' ? 'bg-gray-700' : 'hover:bg-gray-700'}`,\n          title: \"Eraser\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-5 w-5\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M20 20H7L3 16c-1.5-1.5-1.5-3.5 0-5l7-7c1.5-1.5 3.5-1.5 5 0l5 5c1.5 1.5 1.5 3.5 0 5l-4 4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M6 11l5 5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setTool('highlighter'),\n          className: `p-2 rounded-md ${tool === 'highlighter' ? 'bg-gray-700' : 'hover:bg-gray-700'}`,\n          title: \"Highlighter\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-5 w-5\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M9 11l-6 6v3h9l3-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M22 12l-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"color\",\n            value: color,\n            onChange: e => setColor(e.target.value),\n            className: \"w-6 h-6 rounded cursor-pointer\",\n            title: \"Color\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: lineWidth,\n            onChange: e => setLineWidth(parseInt(e.target.value)),\n            className: \"bg-gray-700 rounded p-1 text-xs\",\n            title: \"Line Width\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"1\",\n              children: \"Thin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"2\",\n              children: \"Medium\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"4\",\n              children: \"Thick\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"8\",\n              children: \"Very Thick\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: undo,\n          disabled: historyIndex <= 0,\n          className: `p-2 rounded-md ${historyIndex <= 0 ? 'text-gray-500' : 'hover:bg-gray-700'}`,\n          title: \"Undo\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-5 w-5\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            children: /*#__PURE__*/_jsxDEV(\"polyline\", {\n              points: \"15 18 9 12 15 6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: redo,\n          disabled: historyIndex >= history.length - 1,\n          className: `p-2 rounded-md ${historyIndex >= history.length - 1 ? 'text-gray-500' : 'hover:bg-gray-700'}`,\n          title: \"Redo\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-5 w-5\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            children: /*#__PURE__*/_jsxDEV(\"polyline\", {\n              points: \"9 18 15 12 9 6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: clearCanvas,\n          className: \"p-2 rounded-md hover:bg-gray-700\",\n          title: \"Clear\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-5 w-5\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M3 6h18\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n              x1: \"10\",\n              y1: \"11\",\n              x2: \"10\",\n              y2: \"17\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n              x1: \"14\",\n              y1: \"11\",\n              x2: \"14\",\n              y2: \"17\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: saveCanvas,\n          className: \"p-2 rounded-md hover:bg-gray-700\",\n          title: \"Save\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-5 w-5\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n              points: \"17 21 17 13 7 13 7 21\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n              points: \"7 3 7 8 15 8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 relative bg-gray-900 rounded-b-lg overflow-hidden\",\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        className: \"absolute inset-0 w-full h-full cursor-crosshair\",\n        onMouseDown: startDrawing,\n        onMouseMove: draw,\n        onMouseUp: stopDrawing,\n        onMouseOut: stopDrawing,\n        onTouchStart: handleTouchStart,\n        onTouchMove: handleTouchMove,\n        onTouchEnd: handleTouchEnd\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 233,\n    columnNumber: 5\n  }, this);\n};\n_s(DrawingCanvas, \"pQQmSNPFo7RCNXvM8YTuqNNwy64=\", false, function () {\n  return [useTheme];\n});\n_c = DrawingCanvas;\nexport default DrawingCanvas;\nvar _c;\n$RefreshReg$(_c, \"DrawingCanvas\");","map":{"version":3,"names":["React","useRef","useState","useEffect","useCallback","useTheme","jsxDEV","_jsxDEV","DrawingCanvas","width","height","onSave","_s","canvasRef","darkMode","isDrawing","setIsDrawing","tool","setTool","color","setColor","lineWidth","setLineWidth","history","setHistory","historyIndex","setHistoryIndex","saveCanvasState","current","canvas","state","toDataURL","length","slice","prevHistory","prevIndex","ctx","getContext","offsetWidth","offsetHeight","fillStyle","fillRect","handleResize","tempCanvas","document","createElement","tempCtx","drawImage","window","addEventListener","removeEventListener","undo","newIndex","img","Image","src","onload","clearRect","redo","clearCanvas","startDrawing","e","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","beginPath","moveTo","strokeStyle","lineCap","lineJoin","draw","lineTo","stroke","stopDrawing","closePath","handleTouchStart","preventDefault","touch","touches","mouseEvent","MouseEvent","handleTouchMove","handleTouchEnd","saveCanvas","dataUrl","link","download","Date","toISOString","href","click","className","children","onClick","title","xmlns","viewBox","fill","strokeWidth","strokeLinecap","strokeLinejoin","d","fileName","_jsxFileName","lineNumber","columnNumber","cx","cy","r","type","value","onChange","target","parseInt","disabled","points","x1","y1","x2","y2","ref","onMouseDown","onMouseMove","onMouseUp","onMouseOut","onTouchStart","onTouchMove","onTouchEnd","_c","$RefreshReg$"],"sources":["D:/projects/neuralnotes/src/components/DrawingCanvas.js"],"sourcesContent":["import React, { useRef, useState, useEffect, useCallback } from 'react';\nimport { useTheme } from '../contexts/ThemeContext';\n\nconst DrawingCanvas = ({ width = '100%', height = '100%', onSave }) => {\n  const canvasRef = useRef(null);\n  const { darkMode } = useTheme();\n  \n  const [isDrawing, setIsDrawing] = useState(false);\n  const [tool, setTool] = useState('pen'); // pen, eraser, highlighter\n  const [color, setColor] = useState('#ffffff');\n  const [lineWidth, setLineWidth] = useState(2);\n  const [history, setHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n\n  // Save canvas state to history\n  const saveCanvasState = useCallback(() => {\n    if (!canvasRef.current) return;\n    \n    const canvas = canvasRef.current;\n    const state = canvas.toDataURL();\n    \n    // If we're in the middle of the history, remove everything after current index\n    if (historyIndex < history.length - 1) {\n      setHistory(history.slice(0, historyIndex + 1));\n    }\n    \n    setHistory(prevHistory => [...prevHistory, state]);\n    setHistoryIndex(prevIndex => prevIndex + 1);\n  }, [history, historyIndex]);\n\n  // Initialize canvas\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    \n    const ctx = canvas.getContext('2d');\n    \n    // Set canvas size\n    canvas.width = canvas.offsetWidth;\n    canvas.height = canvas.offsetHeight;\n    \n    // Set background color\n    ctx.fillStyle = darkMode ? '#1a1a1a' : '#f5f5f5';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    \n    // Save initial state\n    saveCanvasState();\n  }, [darkMode, saveCanvasState]);\n\n  // Handle window resize\n  useEffect(() => {\n    const handleResize = () => {\n      const canvas = canvasRef.current;\n      const tempCanvas = document.createElement('canvas');\n      const tempCtx = tempCanvas.getContext('2d');\n      \n      // Copy current canvas to temp canvas\n      tempCanvas.width = canvas.width;\n      tempCanvas.height = canvas.height;\n      tempCtx.drawImage(canvas, 0, 0);\n      \n      // Resize main canvas\n      canvas.width = canvas.offsetWidth;\n      canvas.height = canvas.offsetHeight;\n      \n      // Restore background\n      const ctx = canvas.getContext('2d');\n      ctx.fillStyle = darkMode ? '#1a1a1a' : '#f5f5f5';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      \n      // Restore drawing\n      ctx.drawImage(tempCanvas, 0, 0);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [darkMode]);\n\n\n\n  // Undo\n  const undo = () => {\n    if (historyIndex > 0) {\n      const newIndex = historyIndex - 1;\n      setHistoryIndex(newIndex);\n      \n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext('2d');\n      \n      const img = new Image();\n      img.src = history[newIndex];\n      img.onload = () => {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.drawImage(img, 0, 0);\n      };\n    }\n  };\n\n  // Redo\n  const redo = () => {\n    if (historyIndex < history.length - 1) {\n      const newIndex = historyIndex + 1;\n      setHistoryIndex(newIndex);\n      \n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext('2d');\n      \n      const img = new Image();\n      img.src = history[newIndex];\n      img.onload = () => {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.drawImage(img, 0, 0);\n      };\n    }\n  };\n\n  // Clear canvas\n  const clearCanvas = () => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    \n    ctx.fillStyle = darkMode ? '#1a1a1a' : '#f5f5f5';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    \n    saveCanvasState();\n  };\n\n  // Start drawing\n  const startDrawing = (e) => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const rect = canvas.getBoundingClientRect();\n    \n    // Get mouse position relative to canvas\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    \n    ctx.beginPath();\n    ctx.moveTo(x, y);\n    \n    // Set drawing style based on selected tool\n    if (tool === 'pen') {\n      ctx.strokeStyle = color;\n      ctx.lineWidth = lineWidth;\n      ctx.lineCap = 'round';\n      ctx.lineJoin = 'round';\n    } else if (tool === 'eraser') {\n      ctx.strokeStyle = darkMode ? '#1a1a1a' : '#f5f5f5';\n      ctx.lineWidth = lineWidth * 2;\n      ctx.lineCap = 'round';\n      ctx.lineJoin = 'round';\n    } else if (tool === 'highlighter') {\n      ctx.strokeStyle = `${color}80`; // Add transparency\n      ctx.lineWidth = lineWidth * 3;\n      ctx.lineCap = 'square';\n      ctx.lineJoin = 'bevel';\n    }\n    \n    setIsDrawing(true);\n  };\n\n  // Draw\n  const draw = (e) => {\n    if (!isDrawing) return;\n    \n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const rect = canvas.getBoundingClientRect();\n    \n    // Get mouse position relative to canvas\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    \n    ctx.lineTo(x, y);\n    ctx.stroke();\n  };\n\n  // Stop drawing\n  const stopDrawing = () => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    \n    ctx.closePath();\n    setIsDrawing(false);\n    \n    // Save canvas state to history\n    saveCanvasState();\n  };\n\n  // Handle touch events for mobile\n  const handleTouchStart = (e) => {\n    e.preventDefault();\n    const touch = e.touches[0];\n    const mouseEvent = new MouseEvent('mousedown', {\n      clientX: touch.clientX,\n      clientY: touch.clientY\n    });\n    startDrawing(mouseEvent);\n  };\n\n  const handleTouchMove = (e) => {\n    e.preventDefault();\n    const touch = e.touches[0];\n    const mouseEvent = new MouseEvent('mousemove', {\n      clientX: touch.clientX,\n      clientY: touch.clientY\n    });\n    draw(mouseEvent);\n  };\n\n  const handleTouchEnd = (e) => {\n    e.preventDefault();\n    stopDrawing();\n  };\n\n  // Save canvas as image\n  const saveCanvas = () => {\n    const canvas = canvasRef.current;\n    const dataUrl = canvas.toDataURL('image/png');\n    \n    if (onSave) {\n      onSave(dataUrl);\n    } else {\n      // Default save behavior - download the image\n      const link = document.createElement('a');\n      link.download = `neuralnotes-canvas-${new Date().toISOString().slice(0, 10)}.png`;\n      link.href = dataUrl;\n      link.click();\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"flex justify-between items-center p-2 bg-gray-800 rounded-t-lg\">\n        <div className=\"flex space-x-2\">\n          {/* Tool selection */}\n          <button \n            onClick={() => setTool('pen')}\n            className={`p-2 rounded-md ${tool === 'pen' ? 'bg-gray-700' : 'hover:bg-gray-700'}`}\n            title=\"Pen\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <path d=\"M12 19l7-7 3 3-7 7-3-3z\"></path>\n              <path d=\"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\"></path>\n              <path d=\"M2 2l7.586 7.586\"></path>\n              <circle cx=\"11\" cy=\"11\" r=\"2\"></circle>\n            </svg>\n          </button>\n          <button \n            onClick={() => setTool('eraser')}\n            className={`p-2 rounded-md ${tool === 'eraser' ? 'bg-gray-700' : 'hover:bg-gray-700'}`}\n            title=\"Eraser\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <path d=\"M20 20H7L3 16c-1.5-1.5-1.5-3.5 0-5l7-7c1.5-1.5 3.5-1.5 5 0l5 5c1.5 1.5 1.5 3.5 0 5l-4 4\"></path>\n              <path d=\"M6 11l5 5\"></path>\n            </svg>\n          </button>\n          <button \n            onClick={() => setTool('highlighter')}\n            className={`p-2 rounded-md ${tool === 'highlighter' ? 'bg-gray-700' : 'hover:bg-gray-700'}`}\n            title=\"Highlighter\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <path d=\"M9 11l-6 6v3h9l3-3\"></path>\n              <path d=\"M22 12l-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4\"></path>\n            </svg>\n          </button>\n          \n          {/* Color selection */}\n          <div className=\"flex items-center space-x-1\">\n            <input \n              type=\"color\" \n              value={color}\n              onChange={(e) => setColor(e.target.value)}\n              className=\"w-6 h-6 rounded cursor-pointer\"\n              title=\"Color\"\n            />\n            <select \n              value={lineWidth}\n              onChange={(e) => setLineWidth(parseInt(e.target.value))}\n              className=\"bg-gray-700 rounded p-1 text-xs\"\n              title=\"Line Width\"\n            >\n              <option value=\"1\">Thin</option>\n              <option value=\"2\">Medium</option>\n              <option value=\"4\">Thick</option>\n              <option value=\"8\">Very Thick</option>\n            </select>\n          </div>\n        </div>\n        \n        <div className=\"flex space-x-2\">\n          {/* History controls */}\n          <button \n            onClick={undo}\n            disabled={historyIndex <= 0}\n            className={`p-2 rounded-md ${historyIndex <= 0 ? 'text-gray-500' : 'hover:bg-gray-700'}`}\n            title=\"Undo\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <polyline points=\"15 18 9 12 15 6\"></polyline>\n            </svg>\n          </button>\n          <button \n            onClick={redo}\n            disabled={historyIndex >= history.length - 1}\n            className={`p-2 rounded-md ${historyIndex >= history.length - 1 ? 'text-gray-500' : 'hover:bg-gray-700'}`}\n            title=\"Redo\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <polyline points=\"9 18 15 12 9 6\"></polyline>\n            </svg>\n          </button>\n          <button \n            onClick={clearCanvas}\n            className=\"p-2 rounded-md hover:bg-gray-700\"\n            title=\"Clear\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <path d=\"M3 6h18\"></path>\n              <path d=\"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\"></path>\n              <path d=\"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\"></path>\n              <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\n              <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\n            </svg>\n          </button>\n          <button \n            onClick={saveCanvas}\n            className=\"p-2 rounded-md hover:bg-gray-700\"\n            title=\"Save\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <path d=\"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\"></path>\n              <polyline points=\"17 21 17 13 7 13 7 21\"></polyline>\n              <polyline points=\"7 3 7 8 15 8\"></polyline>\n            </svg>\n          </button>\n        </div>\n      </div>\n      \n      <div className=\"flex-1 relative bg-gray-900 rounded-b-lg overflow-hidden\">\n        <canvas\n          ref={canvasRef}\n          className=\"absolute inset-0 w-full h-full cursor-crosshair\"\n          onMouseDown={startDrawing}\n          onMouseMove={draw}\n          onMouseUp={stopDrawing}\n          onMouseOut={stopDrawing}\n          onTouchStart={handleTouchStart}\n          onTouchMove={handleTouchMove}\n          onTouchEnd={handleTouchEnd}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default DrawingCanvas;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}